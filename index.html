<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Wikipedia Link Path Game</title>
    <style>
      :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color-scheme: light dark; }
      body { margin: 0; padding: 0; }
      .wrap { display: grid; grid-template-rows: auto 1fr; height: 100vh; }
      header { padding: 20px; border-bottom: 1px solid rgba(0,0,0,.1); display: flex; flex-direction: column; gap: 16px; }
      form { display: flex; flex-direction: column; gap: 16px; }
      .form-group { display: flex; flex-direction: column; }
      label { font-size: 14px; opacity: .8; margin-bottom: 6px; }
      input[type="url"] { width: 100%; padding: 12px 14px; border-radius: 10px; border: 1px solid rgba(0,0,0,.2); font-size: 15px; }
      .buttons { display: flex; gap: 12px; }
      button { padding: 12px 16px; border: 0; border-radius: 10px; cursor: pointer; font-weight: 600; }
      button.primary { background: #2b6fff; color: white; }
      button.secondary { background: #eee; }
      button.share { background: #34c759; color: white; }
      button.warn { background: #ff9f0a; color: black; }
      main { display: grid; grid-template-columns: 2fr 1fr; min-height: 0; }
      .articlePane { border-right: 1px solid rgba(0,0,0,.1); min-height: 0; display: grid; grid-template-rows: auto 1fr; }
      .hud { padding: 12px 20px; display: flex; align-items: center; gap: 16px; border-bottom: 1px solid rgba(0,0,0,.06); flex-wrap: wrap; }
      .badge { display: inline-flex; align-items: center; justify-content: center; padding: 6px 12px; border-radius: 999px; background: #f2f4f8; font-weight: 700; }
      .status { font-size: 15px; opacity: .9; }
      .timer { font-variant-numeric: tabular-nums; }
      .controls { margin-left: auto; display: flex; gap: 8px; }
      .frame { overflow: auto; padding: 20px; }
      .frame > .article { max-width: 900px; margin: 0 auto; line-height: 1.5; }
      .sidebar { display: grid; grid-template-rows: auto auto auto 1fr; min-height: 0; }
      .panel { padding: 14px 20px; border-bottom: 1px solid rgba(0,0,0,.06); }
      .list { overflow: auto; padding: 14px 20px; }
      .list ol { margin: 0; padding: 0 0 0 20px; }
      .muted { opacity: .7; }
      .win { background: #e9fbe9; border: 1px solid #b6f0b6; color: #145214; padding: 10px 12px; border-radius: 10px; }
      .err { background: #ffecec; border: 1px solid #ffc4c4; color: #7a0000; padding: 10px 12px; border-radius: 10px; }
      .note { font-size: 13px; opacity: .8; }
      @media (max-width: 900px) { main { grid-template-columns: 1fr; } .articlePane { border-right: 0; border-bottom: 1px solid rgba(0,0,0,.1);} }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <form id="setup">
          <div class="form-group">
            <label for="startUrl">Start article URL</label>
            <input id="startUrl" type="url" placeholder="https://en.wikipedia.org/wiki/Cat" required />
          </div>
          <div class="form-group">
            <label for="targetUrl">Target article URL</label>
            <input id="targetUrl" type="url" placeholder="https://en.wikipedia.org/wiki/Quantum_mechanics" required />
          </div>
          <div class="buttons">
            <button class="primary" id="begin" type="submit">Start game</button>
            <button class="secondary" id="reset" type="button">Reset</button>
          </div>
        </form>
        <div class="note">Paste two Wikipedia links and start. Timer runs during play. You can undo the last step, restart, share, or copy the route.</div>
      </header>
      <main>
        <section class="articlePane">
          <div class="hud">
            <div class="badge" id="clickCount">0</div>
            <div class="status"><span class="muted">Current</span> <span id="currentTitle">None</span></div>
            <div class="status">Time <span class="timer" id="timer">00:00</span></div>
            <div class="controls">
              <button id="undoBtn" class="secondary">Undo</button>
              <button id="restartBtn" class="warn">Restart</button>
            </div>
          </div>
          <div class="frame" id="frame">
            <div class="article" id="article"><p class="muted">Enter two Wikipedia links above and press Start game.</p></div>
          </div>
        </section>
        <aside class="sidebar">
          <div class="panel">
            <div><strong>Goal</strong></div>
            <div class="muted">Navigate from <span id="goalFrom"></span> to <span id="goalTo"></span></div>
          </div>
          <div class="panel" id="msg"></div>
          <div class="panel" style="display:flex; gap:8px; flex-wrap:wrap;">
            <button id="shareResultsBtn" class="share">Copy path text</button>
            <button id="shareLinkBtn" class="primary">Copy share link</button>
          </div>
          <div class="list">
            <div><strong>Steps</strong></div>
            <ol id="steps"></ol>
          </div>
        </aside>
      </main>
    </div>
    <script>
      /* JS unchanged */
    </script>
  </body>
</html>
