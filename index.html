<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Wikipedia Link Path Game</title>
    <style>
      :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
      body { margin: 0; padding: 0; }
      header { padding: 20px; border-bottom: 1px solid rgba(0,0,0,.1); display: flex; flex-direction: column; gap: 16px; }
      form { display: flex; flex-direction: column; gap: 16px; }
      .form-group { display: flex; flex-direction: column; gap: 8px; }
      label { font-size: 14px; opacity: .8; }
      .input-row { display: flex; gap: 8px; }
      input[type="url"] { flex: 1; padding: 12px 14px; border-radius: 10px; border: 1px solid rgba(0,0,0,.2); font-size: 15px; }
      button { padding: 10px 14px; border: 0; border-radius: 10px; cursor: pointer; font-weight: 600; }
      button.primary { background: #2b6fff; color: white; }
      button.secondary { background: #eee; }
      button.share { background: #34c759; color: white; }
      button.warn { background: #ff9f0a; color: black; }
      main { display: grid; grid-template-columns: 2fr 1fr; min-height: 0; }
      .articlePane { border-right: 1px solid rgba(0,0,0,.1); display: grid; grid-template-rows: auto 1fr; }
      .hud { padding: 12px 20px; display: flex; align-items: center; gap: 16px; border-bottom: 1px solid rgba(0,0,0,.06); flex-wrap: wrap; }
      .badge { display: inline-flex; align-items: center; justify-content: center; padding: 6px 12px; border-radius: 999px; background: #f2f4f8; font-weight: 700; }
      .status { font-size: 15px; opacity: .9; }
      .timer { font-variant-numeric: tabular-nums; }
      .controls { margin-left: auto; display: flex; gap: 8px; }
      .frame { overflow: auto; padding: 20px; }
      .frame > .article { max-width: 900px; margin: 0 auto; line-height: 1.5; }
      .sidebar { display: grid; grid-template-rows: auto auto auto 1fr; }
      .panel { padding: 14px 20px; border-bottom: 1px solid rgba(0,0,0,.06); }
      .list { overflow: auto; padding: 14px 20px; }
      .list ol { margin: 0; padding: 0 0 0 20px; }
      .muted { opacity: .7; }
      .win { background: #e9fbe9; border: 1px solid #b6f0b6; color: #145214; padding: 10px 12px; border-radius: 10px; }
      .err { background: #ffecec; border: 1px solid #ffc4c4; color: #7a0000; padding: 10px 12px; border-radius: 10px; }
      .note { font-size: 13px; opacity: .8; }
    </style>
  </head>
  <body>
    <header>
      <form id="setup">
        <div class="form-group">
          <label for="startUrl">Start article URL</label>
          <div class="input-row">
            <input id="startUrl" type="url" placeholder="https://en.wikipedia.org/wiki/Cat" required />
            <button type="button" class="secondary" id="randomStart">Random</button>
          </div>
        </div>
        <div class="form-group">
          <label for="targetUrl">Target article URL</label>
          <div class="input-row">
            <input id="targetUrl" type="url" placeholder="https://en.wikipedia.org/wiki/Quantum_mechanics" required />
            <button type="button" class="secondary" id="randomTarget">Random</button>
          </div>
        </div>
        <div style="display:flex; gap:12px;">
          <button class="primary" id="begin" type="submit">Start game</button>
          <button class="secondary" id="reset" type="button">Reset</button>
        </div>
      </form>
      <div class="note">You can hit “Random” to fill either article with a random Wikipedia page.</div>
    </header>

    <main>
      <section class="articlePane">
        <div class="hud">
          <div class="badge" id="clickCount">0</div>
          <div class="status"><span class="muted">Current</span> <span id="currentTitle">None</span></div>
          <div class="status">Time <span class="timer" id="timer">00:00</span></div>
        </div>
        <div class="frame" id="frame">
          <div class="article" id="article"><p class="muted">Enter two Wikipedia links above and press Start game.</p></div>
        </div>
      </section>

      <aside class="sidebar">
        <div class="panel" id="msg"></div>
        <div class="panel"><button id="shareResultsBtn" class="share">Copy path text</button></div>
        <div class="list"><strong>Steps</strong><ol id="steps"></ol></div>
      </aside>
    </main>

    <script>
      const W_API = "https://en.wikipedia.org/w/api.php";
      const els = {
        startUrl: document.getElementById('startUrl'),
        targetUrl: document.getElementById('targetUrl'),
        randomStart: document.getElementById('randomStart'),
        randomTarget: document.getElementById('randomTarget'),
        msg: document.getElementById('msg')
      };

      async function getRandomArticle() {
        const res = await fetch(`${W_API}?action=query&format=json&origin=*&list=random&rnnamespace=0&rnlimit=1`);
        const data = await res.json();
        const title = data.query.random[0].title;
        return `https://en.wikipedia.org/wiki/${encodeURIComponent(title.replace(/ /g, '_'))}`;
      }

      els.randomStart.addEventListener('click', async () => {
        els.startUrl.value = await getRandomArticle();
      });

      els.randomTarget.addEventListener('click', async () => {
        els.targetUrl.value = await getRandomArticle();
      });
    </script>
  </body>
</html>
